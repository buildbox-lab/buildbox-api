<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Explorer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0c0c0c;
        --surface: #161616;
        --border: #262626;
        --border-hover: #3a3a3a;
        --text: #d4d4d4;
        --text-dim: #737373;
        --accent: #22c55e;
        --accent-dim: rgba(34, 197, 94, 0.08);
        --method-get: #22c55e;
        --status-ok: #22c55e;
        --status-err: #ef4444;
        --mono: "JetBrains Mono", "Cascadia Code", "Fira Code", monospace;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--mono);
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        -webkit-font-smoothing: antialiased;
      }

      .shell {
        max-width: 720px;
        margin: 0 auto;
        padding: 3rem 1.5rem 4rem;
      }

      header {
        margin-bottom: 3rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--border);
      }

      .title {
        font-size: 0.8rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--accent);
        margin-bottom: 0.5rem;
      }

      .subtitle {
        font-size: 0.7rem;
        color: var(--text-dim);
        letter-spacing: 0.02em;
      }

      .endpoint {
        border: 1px solid var(--border);
        background: var(--surface);
        margin-bottom: 1rem;
        transition: border-color 0.2s;
      }

      .endpoint:hover {
        border-color: var(--border-hover);
      }

      .endpoint-head {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1rem;
        cursor: default;
      }

      .method {
        font-size: 0.65rem;
        font-weight: 700;
        letter-spacing: 0.1em;
        padding: 0.2rem 0.5rem;
        background: rgba(34, 197, 94, 0.1);
        color: var(--method-get);
        border: 1px solid rgba(34, 197, 94, 0.2);
        flex-shrink: 0;
      }

      .path {
        font-size: 0.8rem;
        font-weight: 500;
        color: var(--text);
        flex: 1;
      }

      .desc {
        font-size: 0.65rem;
        color: var(--text-dim);
        display: none;
      }

      @media (min-width: 520px) {
        .desc {
          display: block;
        }
      }

      .send-btn {
        font-family: var(--mono);
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        padding: 0.35rem 0.75rem;
        background: transparent;
        color: var(--accent);
        border: 1px solid rgba(34, 197, 94, 0.3);
        cursor: pointer;
        transition: all 0.15s;
        flex-shrink: 0;
      }

      .send-btn:hover {
        background: var(--accent-dim);
        border-color: var(--accent);
      }

      .send-btn:active {
        transform: scale(0.97);
      }

      .send-btn.loading {
        color: var(--text-dim);
        border-color: var(--border);
        pointer-events: none;
      }

      .response {
        display: none;
        border-top: 1px solid var(--border);
        padding: 0.875rem 1rem;
        animation: slideIn 0.2s ease-out;
      }

      .response.visible {
        display: block;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-4px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .response-meta {
        display: flex;
        gap: 1rem;
        margin-bottom: 0.625rem;
        font-size: 0.6rem;
        letter-spacing: 0.04em;
      }

      .response-status {
        font-weight: 700;
      }

      .response-status.ok {
        color: var(--status-ok);
      }
      .response-status.err {
        color: var(--status-err);
      }

      .response-time {
        color: var(--text-dim);
      }

      .response-body {
        font-size: 0.72rem;
        line-height: 1.6;
        color: var(--text);
        background: var(--bg);
        border: 1px solid var(--border);
        padding: 0.75rem;
        white-space: pre-wrap;
        word-break: break-all;
        overflow-x: auto;
      }

      .footer {
        margin-top: 3rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--border);
        font-size: 0.6rem;
        color: var(--text-dim);
        letter-spacing: 0.02em;
        display: flex;
        justify-content: space-between;
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header>
        <div class="title">DevOps Task 1</div>
      </header>

      <div id="endpoints"></div>

      <footer class="footer">
        <span>2 endpoints</span>
        <span id="base-url"></span>
      </footer>
    </div>

    <script>
      const endpoints = [
        {
          method: "GET",
          path: "/health-check",
          description: "Service health status",
        },
        {
          method: "GET",
          path: "/hello-world",
          description: "SERVER_HELLO env value",
        },
      ];

      function render() {
        const container = document.getElementById("endpoints");
        container.innerHTML = endpoints
          .map(
            (ep, i) => `
        <div class="endpoint" data-index="${i}">
          <div class="endpoint-head">
            <span class="method">${ep.method}</span>
            <span class="path">${ep.path}</span>
            <span class="desc">${ep.description}</span>
            <button class="send-btn" onclick="send(${i})">Send</button>
          </div>
          <div class="response" id="res-${i}">
            <div class="response-meta">
              <span class="response-status" id="status-${i}"></span>
              <span class="response-time" id="time-${i}"></span>
            </div>
            <pre class="response-body" id="body-${i}"></pre>
          </div>
        </div>
      `,
          )
          .join("");
      }

      window.send = async function send(index) {
        const ep = endpoints[index];
        const btn = document.querySelectorAll(".send-btn")[index];
        const resEl = document.getElementById(`res-${index}`);
        const statusEl = document.getElementById(`status-${index}`);
        const timeEl = document.getElementById(`time-${index}`);
        const bodyEl = document.getElementById(`body-${index}`);

        btn.textContent = "...";
        btn.classList.add("loading");

        const start = performance.now();

        try {
          const res = await fetch(ep.path);
          const elapsed = Math.round(performance.now() - start);
          const contentType = res.headers.get("content-type") || "";
          let body;

          if (contentType.includes("application/json")) {
            body = JSON.stringify(await res.json(), null, 2);
          } else {
            body = await res.text();
          }

          statusEl.textContent = `${res.status} ${res.statusText}`;
          statusEl.className = `response-status ${res.ok ? "ok" : "err"}`;
          timeEl.textContent = `${elapsed}ms`;
          bodyEl.textContent = body;
        } catch (err) {
          const elapsed = Math.round(performance.now() - start);
          statusEl.textContent = "ERR";
          statusEl.className = "response-status err";
          timeEl.textContent = `${elapsed}ms`;
          bodyEl.textContent = err.message;
        }

        resEl.classList.add("visible");
        btn.textContent = "Send";
        btn.classList.remove("loading");
      }

      document.getElementById("base-url").textContent = location.origin;
      render();
    </script>
  </body>
</html>
